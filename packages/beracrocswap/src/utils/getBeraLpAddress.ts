// import { crocDexAddress } from "@bera/config";
import { beraTokenAddress, crocDexAddress, nativeTokenAddress } from "@bera/config";
import { ethers } from "ethers";
import { keccak256 } from "ethers/lib/utils";

export const CREATION_CODE =
  "0x60c06040527355684e2ca2bace0adc512c1aff880b15b8ea72146080523480156200002957600080fd5b506040518060400160405280601881526020017f426572612043726f63204c5020455243323020546f6b656e00000000000000008152506040518060400160405280600b81526020016a4c502d4265726143726f6360a81b815250816000908162000095919062000156565b506001620000a4828262000156565b50503360a0525062000222565b634e487b7160e01b600052604160045260246000fd5b600181811c90821680620000dc57607f821691505b602082108103620000fd57634e487b7160e01b600052602260045260246000fd5b50919050565b601f8211156200015157600081815260208120601f850160051c810160208610156200012c5750805b601f850160051c820191505b818110156200014d5782815560010162000138565b5050505b505050565b81516001600160401b03811115620001725762000172620000b1565b6200018a81620001838454620000c7565b8462000103565b602080601f831160018114620001c25760008415620001a95750858301515b600019600386901b1c1916600185901b1785556200014d565b600085815260208120601f198616915b82811015620001f357888601518255948401946001909101908401620001d2565b5085821015620002125787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b60805160a05161149a6200024f600039600081816102e6015261059c0152600061070c015261149a6000f3fe608060405234801561001057600080fd5b506004361061014d5760003560e01c806370a08231116100c3578063b1dd61b61161007c578063b1dd61b6146102d8578063c45a0155146102e1578063c55dae6314610308578063d505accf1461031b578063dd62ed3e1461032e578063e85f3fb01461035757600080fd5b806370a08231146102555780637ecebe001461027b57806395340703146102a157806395d89b41146102b45780639b503daf146102bc578063a9059cbb146102c557600080fd5b806318160ddd1161011557806318160ddd146101dd578063217a4b70146101ed578063234ff1431461021857806323b872dd1461022b578063313ce5671461023e5780633644e5151461024d57600080fd5b806306fdde03146101525780630781d10114610170578063095ea7b3146101925780630f382c0e146101b55780631794bb3c146101c8575b600080fd5b61015a610394565b6040516101679190610f68565b60405180910390f35b61018461017e366004610fb7565b50600090565b604051908152602001610167565b6101a56101a0366004610fd2565b610426565b6040519015158152602001610167565b6101a56101c336600461100e565b61047a565b6101db6101d636600461109a565b61053b565b005b6805345cdf77eb68f44c54610184565b600854610200906001600160a01b031681565b6040516001600160a01b039091168152602001610167565b6101846102263660046110d6565b610635565b6101a561023936600461109a565b610851565b60405160128152602001610167565b610184610886565b610184610263366004610fb7565b6387a211a2600c908152600091909152602090205490565b610184610289366004610fb7565b6338377508600c908152600091909152602090205490565b6101a56102af36600461100e565b610903565b61015a6109b2565b61018460065481565b6101a56102d3366004610fd2565b6109c1565b61018460095481565b6102007f000000000000000000000000000000000000000000000000000000000000000081565b600754610200906001600160a01b031681565b6101db610329366004611112565b6109f4565b61018461033c366004611185565b602052637f5e9f20600c908152600091909152603490205490565b6101db610365366004610fb7565b33600090815260056020526040902080546001600160a01b0319166001600160a01b0392909216919091179055565b6060600080546103a3906111b8565b80601f01602080910402602001604051908101604052809291908181526020018280546103cf906111b8565b801561041c5780601f106103f15761010080835404028352916020019161041c565b820191906000526020600020905b8154815290600101906020018083116103ff57829003601f168201915b5050505050905090565b600082602052637f5e9f20600c5233600052816034600c205581600052602c5160601c337f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92560206000a35060015b92915050565b600060065486146104bf5760405162461bcd60e51b815260206004820152600a60248201526915dc9bdb99c81c1bdbdb60b21b60448201526064015b60405180910390fd5b8460020b60001480156104d557508360020b6000145b61051b5760405162461bcd60e51b8152602060048201526017602482015276139bdb8b50995c9850dc9bd8c813140811195c1bdcda5d604a1b60448201526064016104b6565b61052e87846001600160801b0316610b7d565b5060019695505050505050565b826001600160a01b0316826001600160a01b0316116105915760405162461bcd60e51b815260206004820152601260248201527124b73b30b634b2102a37b5b2b7102830b4b960711b60448201526064016104b6565b336001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016146105ed5760405162461bcd60e51b81526020600482015260016024820152604160f81b60448201526064016104b6565b600780546001600160a01b038086166001600160a01b0319928316179092556008805492851692909116919091179055600981905561062d838383610b9f565b600655505050565b600061063f610c05565b61064b82600080610c58565b336001600160a01b038316148061067b57506001600160a01b038281166000908152600560205260409020541633145b6106b65760405162461bcd60e51b815260206004820152600c60248201526b1d5b985d5d1a1bdc9a5e995960a21b60448201526064016104b6565b6001600160a01b0382811660009081526002602052604080822080548881189881119890980288188089039091558151631bb8fb2160e11b815230600482015287851660248201526044810182905291519097937f00000000000000000000000000000000000000000000000000000000000000001691633771f6429160648083019286929190829003018183875af1158015610757573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405261077f9190810190611262565b905080516001146107d25760405162461bcd60e51b815260206004820152601760248201527f746f6f206d616e7920636f696e732072657475726e656400000000000000000060448201526064016104b6565b85816000815181106107e6576107e66113b9565b6020026020010151600001511461083f5760405162461bcd60e51b815260206004820152601960248201527f776974686472617720616d6f756e7420696e636f72726563740000000000000060448201526064016104b6565b610847610c05565b5093949350505050565b600061085b610c05565b61086784836000610c58565b61087383836001610c58565b61087e848484610d3f565b949350505050565b600080610891610394565b8051906020012090506040517f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f81528160208201527fc89efdaa54c0f20c7adf612882df0950f5a951637e0307cdcb4c672f298b8bc6604082015246606082015230608082015260a081209250505090565b600060065486146109435760405162461bcd60e51b815260206004820152600a60248201526915dc9bdb99c81c1bdbdb60b21b60448201526064016104b6565b8460020b600014801561095957508360020b6000145b61099f5760405162461bcd60e51b8152602060048201526017602482015276139bdb8b50995c9850dc9bd8c813140811195c1bdcda5d604a1b60448201526064016104b6565b61052e87846001600160801b0316610deb565b6060600180546103a3906111b8565b60006109cb610c05565b6109d733836000610c58565b6109e383836001610c58565b6109ed8383610e09565b9392505050565b60006109fe610394565b80519060200120905084421115610a1d57631a15a3cc6000526004601cfd5b6040518860601b60601c98508760601b60601c975065383775081901600e52886000526020600c2080547f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f83528360208401527fc89efdaa54c0f20c7adf612882df0950f5a951637e0307cdcb4c672f298b8bc6604084015246606084015230608084015260a08320602e527f6e71edae12b1b97f4d1f60370fef10105fa2faae0126114a169c64845d6126c983528a60208401528960408401528860608401528060808401528760a084015260c08320604e526042602c206000528660ff1660205285604052846060526020806080600060015afa8b3d5114610b295763ddafbaef6000526004601cfd5b0190556303faf4f960a51b88176040526034602c2087905587897f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925602060608501a360405250506000606052505050505050565b610b85610c05565b610b9182826001610c58565b610b9b8282610e72565b5050565b6000826001600160a01b0316846001600160a01b031610610bbf57600080fd5b604080516001600160a01b038087166020830152851691810191909152606081018390526080016040516020818303038152906040528051906020012090509392505050565b600060038190556805345cdf77eb68f44c5481908015610c535780610c32670de0b6b3a7640000846113e5565b610c3c91906113fc565b60046000828254610c4d919061141e565b90915550505b505050565b6001600160a01b038316600090815260026020526040812090610c8d856387a211a2600c908152600091909152602090205490565b6001830154600454919250908215801590610ca85750600082115b15610cee5781670de0b6b3a7640000610cc183866113e5565b610ccb91906113fc565b610cd59190611431565b846000016000828254610ce8919061141e565b90915550505b600085610d0457610cff8785611431565b610d0e565b610d0e878561141e565b9050670de0b6b3a7640000610d2383836113e5565b610d2d91906113fc565b85600101819055505050505050505050565b60008360601b33602052637f5e9f208117600c526034600c2080546001810115610d7f5780851115610d79576313be252b6000526004601cfd5b84810382555b50506387a211a28117600c526020600c20805480851115610da85763f4d678b86000526004601cfd5b84810382555050836000526020600c208381540181555082602052600c5160601c8160601c600080516020611445833981519152602080a3505060019392505050565b610df3610c05565b610dff82826000610c58565b610b9b8282610edf565b60006387a211a2600c52336000526020600c20805480841115610e345763f4d678b86000526004601cfd5b83810382555050826000526020600c208281540181555081602052600c5160601c33600080516020611445833981519152602080a350600192915050565b6805345cdf77eb68f44c5481810181811015610e965763e5cfe9576000526004601cfd5b806805345cdf77eb68f44c5550506387a211a2600c52816000526020600c208181540181555080602052600c5160601c6000600080516020611445833981519152602080a35050565b6387a211a2600c52816000526020600c20805480831115610f085763f4d678b86000526004601cfd5b82900390556805345cdf77eb68f44c8054829003905560008181526001600160a01b038316600080516020611445833981519152602083a35050565b60005b83811015610f5f578181015183820152602001610f47565b50506000910152565b6020815260008251806020840152610f87816040850160208701610f44565b601f01601f19169190910160400192915050565b80356001600160a01b0381168114610fb257600080fd5b919050565b600060208284031215610fc957600080fd5b6109ed82610f9b565b60008060408385031215610fe557600080fd5b610fee83610f9b565b946020939093013593505050565b8035600281900b8114610fb257600080fd5b60008060008060008060c0878903121561102757600080fd5b61103087610f9b565b95506020870135945061104560408801610ffc565b935061105360608801610ffc565b925060808701356001600160801b038116811461106f57600080fd5b915060a087013567ffffffffffffffff8116811461108c57600080fd5b809150509295509295509295565b6000806000606084860312156110af57600080fd5b6110b884610f9b565b92506110c660208501610f9b565b9150604084013590509250925092565b6000806000606084860312156110eb57600080fd5b833592506110fb60208501610f9b565b915061110960408501610f9b565b90509250925092565b600080600080600080600060e0888a03121561112d57600080fd5b61113688610f9b565b965061114460208901610f9b565b95506040880135945060608801359350608088013560ff8116811461116857600080fd5b9699959850939692959460a0840135945060c09093013592915050565b6000806040838503121561119857600080fd5b6111a183610f9b565b91506111af60208401610f9b565b90509250929050565b600181811c908216806111cc57607f821691505b6020821081036111ec57634e487b7160e01b600052602260045260246000fd5b50919050565b634e487b7160e01b600052604160045260246000fd5b6040805190810167ffffffffffffffff8111828210171561122b5761122b6111f2565b60405290565b604051601f8201601f1916810167ffffffffffffffff8111828210171561125a5761125a6111f2565b604052919050565b6000602080838503121561127557600080fd5b825167ffffffffffffffff8082111561128d57600080fd5b818501915085601f8301126112a157600080fd5b8151818111156112b3576112b36111f2565b8060051b6112c2858201611231565b91825283810185019185810190898411156112dc57600080fd5b86860192505b838310156113ac578251858111156112fa5760008081fd5b86016040601f19828d0381018213156113135760008081fd5b61131b611208565b8a840151815282840151898111156113335760008081fd5b8085019450508d603f8501126113495760008081fd5b8a8401518981111561135d5761135d6111f2565b61136d8c84601f84011601611231565b92508083528e848287010111156113845760008081fd5b611393818d8501868801610f44565b50808b01919091528452505091860191908601906112e2565b9998505050505050505050565b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052601160045260246000fd5b8082028115828204841417610474576104746113cf565b60008261141957634e487b7160e01b600052601260045260246000fd5b500490565b80820180821115610474576104746113cf565b81810381811115610474576104746113cf56feddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3efa264697066735822122091fd72c554b2eb6e4c97530d0db006fd7475f12c429fffc99a985560f255c1af64736f6c63430008130033";

export const getBeraLpAddress = (
  base: string,
  quote: string,
) => {

  let b = ''
  let q = ''
  if(base === nativeTokenAddress) {
    b = beraTokenAddress
  } else {
    b = base
  }
  if(quote === nativeTokenAddress) {
    q = beraTokenAddress
  } else {
    q = quote
  }

  const salt = ethers.utils.keccak256(
    ethers.utils.solidityPack(["address", "address"], [b, q]),
  );
  const creationCode = CREATION_CODE;
  const initCodeHash = keccak256(creationCode);
  const create2Address = ethers.utils.getCreate2Address(
    crocDexAddress,
    salt,
    initCodeHash,
  );
  console.log("create2Address", create2Address);
  return create2Address;
};
